syntax = "proto3";

package grade;

option java_multiple_files = true;
option java_package = "com.stdiscm.grade";

message GradeRecord {
  string id = 1;
  string student_id = 2;
  string course_id = 3;
  string course_code = 4;
  string course_name = 5;
  string term = 6;
  string academic_year = 7;
  string grade = 8;
}

message SubmitGradeRequest {
  string student_id = 1;
  string course_id = 2;
  string course_code = 3;
  string course_name = 4;
  string term = 5;
  string academic_year = 6;
  string grade = 7;
}

message SubmitGradeResponse {
  GradeRecord record = 1;
}

message StudentGradeInput {
  string student_id = 1;
  string grade = 2;
}

message SubmitGradesRequest {
  string course_id = 1;
  string course_code = 2;
  string course_name = 3;
  string term = 4;
  string academic_year = 5;
  repeated StudentGradeInput records = 6;
}

message SubmitGradesResponse {
  repeated GradeRecord records = 1;
}

message ListGradesRequest {
  string student_id = 1;
}

message ListGradesResponse {
  repeated GradeRecord grades = 1;
}

message GetGradesRequest {
  string student_id = 1;
}

message GradesResponse {
  repeated GradeRecord grades = 1;
}

message ListCourseGradesRequest {
  string course_id = 1;
  string course_code = 2;
  string term = 3;
  string academic_year = 4;
}

message ListCourseGradesResponse {
  repeated GradeRecord grades = 1;
}

message TermCourseGrade {
  string course_id = 1;
  string course_code = 2;
  string course_name = 3;
  string grade = 4;
}

message TermGradesGroup {
  string academic_year = 1;
  string term = 2;
  repeated TermCourseGrade courses = 3;
}

message ListStudentTermGradesRequest {
  string student_id = 1;
}

message ListStudentTermGradesResponse {
  repeated TermGradesGroup groups = 1;
}

service GradeService {
  rpc SubmitGrade (SubmitGradeRequest) returns (SubmitGradeResponse);
  rpc SubmitGrades (SubmitGradesRequest) returns (SubmitGradesResponse);
  rpc GetGradesByStudent (GetGradesRequest) returns (GradesResponse);
  rpc ListGrades (ListGradesRequest) returns (ListGradesResponse);
  rpc ListCourseGrades (ListCourseGradesRequest) returns (ListCourseGradesResponse);
  rpc ListStudentTermGrades (ListStudentTermGradesRequest) returns (ListStudentTermGradesResponse);
}
